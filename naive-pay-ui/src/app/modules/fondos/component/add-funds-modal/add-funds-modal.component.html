<app-modal [isOpen]="isOpen" (close)="onClose()">
    <div class="p-6">
        <div class="mb-6">
            <h2 class="text-xl font-bold text-gray-800 dark:text-white/90">
                Cargar Fondos
            </h2>
            <p class="mt-1 text-sm text-gray-500 dark:text-gray-400">
                Ingrese el monto que desea cargar a su cuenta
            </p>
        </div>
        <form [formGroup]="addFundsForm" (ngSubmit)="onSubmit()">
            <div class="space-y-4">
                <div>
                    <label
                            for="amount"
                            class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"
                    >
                        Monto (CLP)
                    </label>
                    <input
                            id="amount"
                            type="number"
                            formControlName="amount"
                            placeholder="10000"
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg text-gray-800 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-brand-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-700 dark:text-white dark:placeholder-gray-500"
                            [class.border-red-500]="isFieldInvalid('amount')"
                    />

                    <!--  Mensaje de error del campo -->
                    @if (isFieldInvalid('amount')) {
                        <p class="mt-2 text-sm text-red-600 dark:text-red-400">
                            {{ getErrorMessage('amount') }}
                        </p>
                    }
                </div>

                <!-- Mensaje de error global -->
                @if (errorMessage) {
                    <div class="rounded-lg border border-red-200 bg-red-50 p-3 dark:border-red-800 dark:bg-red-900/20">
                        <p class="text-sm text-red-600 dark:text-red-400">
                            {{ errorMessage }}
                        </p>
                    </div>
                }

                <!-- Mensaje de éxito -->
                @if (successMessage) {
                    <div class="rounded-lg border border-green-200 bg-green-50 p-3 dark:border-green-800 dark:bg-green-900/20">
                        <p class="text-sm text-green-600 dark:text-green-400">
                            {{ successMessage }}
                        </p>
                    </div>
                }
            </div>
        </form>

        <!-- Botones de acción -->
        <div class="flex gap-3 mt-6">
            <app-button
                    variant="outline"
                    size="md"
                    (btnClick)="onClose()"
                    [disabled]="isLoading"
                    className="flex-1"
            >
                Cancelar
            </app-button>

            <app-button
                    variant="primary"
                    size="md"
                    (btnClick)="onSubmit()"
                    [disabled]="addFundsForm.invalid || isLoading"
                    className="flex-1"
            >
                {{ isLoading ? 'Cargando...' : 'Confirmar Carga' }}
            </app-button>
        </div>
    </div>
</app-modal>
